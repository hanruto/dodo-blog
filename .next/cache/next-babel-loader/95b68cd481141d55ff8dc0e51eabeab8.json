{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from 'react';\nvar defaultSpeed = 600;\nvar defaultInterval = 200;\nexport var Animate =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Animate, _React$Component);\n\n  function Animate() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Animate);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Animate)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      animate: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"timer\", 0);\n\n    return _this;\n  }\n\n  _createClass(Animate, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.props.animate) {\n        this.timer = setTimeout(function () {\n          return _this2.setState({\n            animate: true\n          });\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this3 = this;\n\n      if (prevProps.animate !== this.props.animate) {\n        this.timer = window.setTimeout(function () {\n          return _this3.setState({\n            animate: _this3.props.animate\n          });\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.timer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          _this$props$speed = _this$props.speed,\n          speed = _this$props$speed === void 0 ? defaultSpeed : _this$props$speed,\n          from = _this$props.from,\n          to = _this$props.to;\n      var animate = this.state.animate;\n      var additionAnimate = (animate ? to : from) || {};\n      return React.Children.map(children, function (item) {\n        return React.cloneElement(item, {\n          style: _objectSpread({}, {\n            transform: \"translateY(\".concat(animate ? 0 : 40, \"px)\"),\n            transition: \"all ease-in-out \".concat(speed / 1000, \"s\"),\n            opacity: animate ? 1 : 0\n          }, {}, additionAnimate)\n        });\n      });\n    }\n  }]);\n\n  return Animate;\n}(React.Component);\n\nvar AnimateQueue =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(AnimateQueue, _React$Component2);\n\n  function AnimateQueue() {\n    var _getPrototypeOf3;\n\n    var _this4;\n\n    _classCallCheck(this, AnimateQueue);\n\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    _this4 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(AnimateQueue)).call.apply(_getPrototypeOf3, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this4), \"timer\", null);\n\n    _defineProperty(_assertThisInitialized(_this4), \"state\", {\n      current: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this4), \"handleAnimate\", function (animate) {\n      var _this4$props = _this4.props,\n          _this4$props$interval = _this4$props.interval,\n          interval = _this4$props$interval === void 0 ? defaultInterval : _this4$props$interval,\n          children = _this4$props.children,\n          exit = _this4$props.exit,\n          onAnimateStart = _this4$props.onAnimateStart;\n      if (!children || !children.length) return false;\n      clearTimeout(_this4.timer);\n\n      if (exit) {\n        return _this4.setState({\n          current: 0\n        });\n      }\n\n      var loop = function loop() {\n        var current = _this4.state.current;\n        var max = children ? children.length : 0;\n\n        if (!animate && current <= 0) {\n          _this4.setState({\n            current: 0\n          });\n\n          _this4.props.onAnimateEnd && _this4.props.onAnimateEnd();\n          return false;\n        }\n\n        if (animate && current >= max) {\n          _this4.setState({\n            current: max\n          });\n\n          _this4.props.onAnimateEnd && _this4.props.onAnimateEnd();\n          return false;\n        }\n\n        current = current + (animate ? 1 : -1);\n\n        _this4.setState({\n          current: current\n        });\n\n        _this4.timer = setTimeout(loop, interval);\n      };\n\n      onAnimateStart && onAnimateStart();\n      _this4.timer = setTimeout(loop, interval);\n    });\n\n    return _this4;\n  }\n\n  _createClass(AnimateQueue, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.handleAnimate(this.props.animate);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!this.props.children || !prevProps.children) {\n        return null;\n      }\n\n      if (prevProps.exit !== this.props.exit) {\n        return this.handleAnimate(this.props.animate);\n      }\n\n      if (prevProps.animate !== this.props.animate) {\n        return this.handleAnimate(this.props.animate);\n      }\n\n      if (prevProps.children.length !== this.props.children.length) {\n        return this.handleAnimate(this.props.animate);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.timer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          children = _this$props2.children,\n          _this$props2$speed = _this$props2.speed,\n          speed = _this$props2$speed === void 0 ? 400 : _this$props2$speed,\n          animate = _this$props2.animate,\n          rest = _objectWithoutProperties(_this$props2, [\"children\", \"speed\", \"animate\"]);\n\n      var current = this.state.current;\n      if (!children) return null;\n      return React.Children.map(children, function (item, index) {\n        return __jsx(Animate, _extends({\n          animate: index < current,\n          speed: speed\n        }, rest), item);\n      });\n    }\n  }]);\n\n  return AnimateQueue;\n}(React.Component);\n\nexport { AnimateQueue as default };\nexport var AnimateQueueGroup =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(AnimateQueueGroup, _React$Component3);\n\n  function AnimateQueueGroup() {\n    var _getPrototypeOf4;\n\n    var _this5;\n\n    _classCallCheck(this, AnimateQueueGroup);\n\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    _this5 = _possibleConstructorReturn(this, (_getPrototypeOf4 = _getPrototypeOf(AnimateQueueGroup)).call.apply(_getPrototypeOf4, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this5), \"state\", {\n      current: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this5), \"animate\", _this5.props.animate);\n\n    _defineProperty(_assertThisInitialized(_this5), \"handleNextAnimate\", function () {\n      var current = _this5.state.current;\n      var children = _this5.props.children;\n      var max = children ? children.length : 0;\n\n      if (_this5.animate && current >= max) {\n        current = max;\n      } else if (!_this5.animate && current <= 0) {\n        current = 0;\n      } else {\n        _this5.animate ? current = current + 1 : current = current - 1;\n      }\n\n      _this5.setState({\n        current: current\n      });\n    });\n\n    return _this5;\n  }\n\n  _createClass(AnimateQueueGroup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.handleNextAnimate();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.animate !== this.props.animate) {\n        this.animate = nextProps.animate;\n        this.handleNextAnimate();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var _this$props3 = this.props,\n          children = _this$props3.children,\n          _this$props3$speed = _this$props3.speed,\n          speed = _this$props3$speed === void 0 ? 400 : _this$props3$speed,\n          animate = _this$props3.animate,\n          rest = _objectWithoutProperties(_this$props3, [\"children\", \"speed\", \"animate\"]);\n\n      var current = this.state.current;\n      return React.Children.map(children, function (item, index) {\n        return __jsx(\"div\", {\n          className: \"ze-animate-group-wrapper\"\n        }, React.cloneElement(item, _objectSpread({\n          animate: index < current\n        }, rest, {\n          onAnimateEnd: _this6.handleNextAnimate\n        })));\n      });\n    }\n  }]);\n\n  return AnimateQueueGroup;\n}(React.Component);","map":{"version":3,"sources":["/Users/qm/project/dodo-blog-v2/components/AnimateQueue/index.tsx"],"names":["React","defaultSpeed","defaultInterval","Animate","animate","props","timer","setTimeout","setState","prevProps","window","clearTimeout","children","speed","from","to","state","additionAnimate","Children","map","item","cloneElement","style","transform","transition","opacity","Component","AnimateQueue","current","interval","exit","onAnimateStart","length","loop","max","onAnimateEnd","handleAnimate","rest","index","AnimateQueueGroup","handleNextAnimate","nextProps"],"mappings":"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","sourcesContent":["import * as React from 'react'\n\nconst defaultSpeed = 600\nconst defaultInterval = 200\n\ninterface Props {\n  animate?: boolean\n  speed?: number\n  from?: React.CSSProperties\n  to?: React.CSSProperties\n  children?: any\n}\n\nexport class Animate extends React.Component<Props> {\n  state = {\n    animate: false,\n  }\n\n  timer = 0\n\n  componentDidMount() {\n    if (this.props.animate) {\n      this.timer = setTimeout(() => this.setState({ animate: true }))\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.animate !== this.props.animate) {\n      this.timer = window.setTimeout(() =>\n        this.setState({ animate: this.props.animate })\n      )\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timer)\n  }\n\n  render() {\n    const { children, speed = defaultSpeed, from, to } = this.props\n    const { animate } = this.state\n    const additionAnimate = (animate ? to : from) || {}\n\n    return React.Children.map(children, item =>\n      React.cloneElement(item, {\n        style: {\n          ...{\n            transform: `translateY(${animate ? 0 : 40}px)`,\n            transition: `all ease-in-out ${speed / 1000}s`,\n            opacity: animate ? 1 : 0,\n          },\n          ...additionAnimate,\n        },\n      })\n    )\n  }\n}\n\ninterface QueueProps {\n  exit?: boolean\n  interval?: number\n  children: React.ReactElement[]\n  onAnimateEnd?: Function\n  onAnimateStart?: Function\n}\n\nexport default class AnimateQueue extends React.Component<Props & QueueProps> {\n  timer = null\n\n  state = {\n    current: 0,\n  }\n\n  componentDidMount() {\n    this.handleAnimate(this.props.animate)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!this.props.children || !prevProps.children) {\n      return null\n    }\n    if (prevProps.exit !== this.props.exit) {\n      return this.handleAnimate(this.props.animate)\n    }\n    if (prevProps.animate !== this.props.animate) {\n      return this.handleAnimate(this.props.animate)\n    }\n    if (prevProps.children.length !== this.props.children.length) {\n      return this.handleAnimate(this.props.animate)\n    }\n  }\n\n  handleAnimate = animate => {\n    const {\n      interval = defaultInterval,\n      children,\n      exit,\n      onAnimateStart,\n    } = this.props\n\n    if (!children || !children.length) return false\n\n    clearTimeout(this.timer)\n\n    if (exit) {\n      return this.setState({ current: 0 })\n    }\n\n    const loop = () => {\n      let current = this.state.current\n      const max = children ? children.length : 0\n      if (!animate && current <= 0) {\n        this.setState({ current: 0 })\n        this.props.onAnimateEnd && this.props.onAnimateEnd()\n        return false\n      }\n\n      if (animate && current >= max) {\n        this.setState({ current: max })\n        this.props.onAnimateEnd && this.props.onAnimateEnd()\n        return false\n      }\n\n      current = current + (animate ? 1 : -1)\n\n      this.setState({ current })\n      this.timer = setTimeout(loop, interval)\n    }\n\n    onAnimateStart && onAnimateStart()\n\n    this.timer = setTimeout(loop, interval)\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timer)\n  }\n\n  render() {\n    const { children, speed = 400, animate, ...rest } = this.props\n    const { current } = this.state\n\n    if (!children) return null\n\n    return React.Children.map(children, (item, index) => {\n      return (\n        <Animate animate={index < current} speed={speed} {...rest}>\n          {item}\n        </Animate>\n      )\n    })\n  }\n}\n\nexport class AnimateQueueGroup extends React.Component<Props & QueueProps> {\n  state = {\n    current: 0,\n  }\n\n  animate = this.props.animate\n\n  componentDidMount() {\n    this.handleNextAnimate()\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.animate !== this.props.animate) {\n      this.animate = nextProps.animate\n      this.handleNextAnimate()\n    }\n  }\n\n  handleNextAnimate = () => {\n    let { current } = this.state\n    const { children } = this.props\n    const max = children ? children.length : 0\n\n    if (this.animate && current >= max) {\n      current = max\n    } else if (!this.animate && current <= 0) {\n      current = 0\n    } else {\n      this.animate ? (current = current + 1) : (current = current - 1)\n    }\n\n    this.setState({ current })\n  }\n\n  render() {\n    const { children, speed = 400, animate, ...rest } = this.props\n    const { current } = this.state\n\n    return React.Children.map(children, (item, index) => {\n      return (\n        <div className=\"ze-animate-group-wrapper\">\n          {React.cloneElement(item, {\n            animate: index < current,\n            ...rest,\n            onAnimateEnd: this.handleNextAnimate,\n          })}\n        </div>\n      )\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}